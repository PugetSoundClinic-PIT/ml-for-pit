

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Counting Words &#8212; Machine Learning for Public Interest Technologists</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/03/lecture';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Municipal Legislative (Text) Data" href="../02/lecture.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../README.html">
                    Machine Learning (and analysis) for Public Interest Technologists
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">About This Course</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01/lecture.html">Lecture 1 – About This Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01/exercise.html">Exercise 1 – Getting Setup with Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01/reference.html">Exercise 1 – Reference Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Municipal Legislative Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02/lecture.html">Municipal Legislative (Text) Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Counting Words</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Counting Words</a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/PugetSoundClinic-PIT/ml-for-pit/blob/main/content/03/lecture.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PugetSoundClinic-PIT/ml-for-pit" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PugetSoundClinic-PIT/ml-for-pit/issues/new?title=Issue%20on%20page%20%2Fcontent/03/lecture.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/03/lecture.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Counting Words</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Counting Words</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-count">Let’s Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ngrams">Ngrams</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-transcript-data">Working With Transcript Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stopping-here-for-now-continue-later">STOPPING HERE FOR NOW. CONTINUE LATER</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-count-words">How to Count Words</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scikit-learn-count-vectorizer">Scikit Learn Count Vectorizer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#words">Words?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pass-in-all-documents-at-once">Pass In All Documents At Once</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#most-common-words-average-across-all-meetings">Most Common Words (Average Across All Meetings)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">Plotting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-is-this-deceptive">Why Is This Deceptive?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#replot">Replot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-rolling-mean-over-one-month">Possible Solution: Rolling Mean Over One Month</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-stem-each-word-prior-to-counting">Possible Solution: Stem Each Word Prior to Counting</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="counting-words">
<h1>Counting Words<a class="headerlink" href="#counting-words" title="Permalink to this heading">#</a></h1>
<p>Using the counts of words in a document is a good starting point for descriptive analysis, visualization, and predictive modeling. For example, counts of words is what makes up the data behind <a class="reference external" href="https://trends.google.com/home">Google Search Trends</a> and the <a class="reference external" href="https://books.google.com/ngrams/">Google NGram Viewer</a>.</p>
<p>Between search trends, ngram viewer, and more, the goal is to provide a broad picture as to what things are being discussed, searched, mentioned, etc.</p>
<p>Applying this same idea to municipal legislative data, we might try understand what general topics are commonly discussed in a council via core words for a topic. For example, if the words “housing”, “rent”, and “affordability” are all spoken frequently in a city council meeting, we can broadly interpret that those three terms (and more general ideas about “housing affordability”) were important topics of the meeting.</p>
<p>So for this chapter, let’s try to be able to <strong>find and compare common topics discussed in a city council meeting, via word counts.</strong></p>
<section id="let-s-count">
<h2>Let’s Count<a class="headerlink" href="#let-s-count" title="Permalink to this heading">#</a></h2>
<p>Counting words is such a common task and is so heavily utilized that <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> has a whole class for doing just that called <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html">CountVectorizer</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="c1"># Create CountVectorizer object</span>
<span class="n">count_vec</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>

<span class="c1"># An example sentence we will count the words in</span>
<span class="n">example</span> <span class="o">=</span> <span class="s2">&quot;Hello my name is Eva and I am commenting today in opposition of this bill.&quot;</span>

<span class="c1"># Get counts</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">count_vec</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span>
<span class="n">counts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;1x14 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;
	with 14 stored elements in Compressed Sparse Row format&gt;
</pre></div>
</div>
</div>
</div>
<p>Don’t be afraid of the “sparse matrix” it is just an efficient storage mechanism that scikit-learn uses. We can see the results in a pandas dataframe too by doing the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">counts_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">counts</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>  <span class="c1"># convert from sparse matrix to numpy</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>  <span class="c1"># store words as the column names</span>
<span class="p">)</span>
<span class="n">counts_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>am</th>
      <th>and</th>
      <th>bill</th>
      <th>commenting</th>
      <th>eva</th>
      <th>hello</th>
      <th>in</th>
      <th>is</th>
      <th>my</th>
      <th>name</th>
      <th>of</th>
      <th>opposition</th>
      <th>this</th>
      <th>today</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s take a moment to notice that all of the words have been lowercased.</p>
<p>There are many decisions to make when counting and we recommend you view the documentation for <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html">CountVectorizer</a> to see all of the options but we will highlight a few throughout the rest of this chapter.</p>
<p>First, as already noted, lowercasing is something you can enable or disable. It depends on how specific you want your counts to be, do you want “House” and “house” to be counted separately? The only difference between the two might be that one is the first word in a sentence, but there are many other cases where casing is important to keep.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># And example of turning off lowercasing</span>
<span class="n">count_vec_no_lowercase</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">lowercase</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec_no_lowercase</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec_no_lowercase</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Eva</th>
      <th>Hello</th>
      <th>am</th>
      <th>and</th>
      <th>bill</th>
      <th>commenting</th>
      <th>in</th>
      <th>is</th>
      <th>my</th>
      <th>name</th>
      <th>of</th>
      <th>opposition</th>
      <th>this</th>
      <th>today</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="ngrams">
<h2>Ngrams<a class="headerlink" href="#ngrams" title="Permalink to this heading">#</a></h2>
<p>Second, all of the words are counted individually. I.e. a single word, gets a single count. What if we want to track pairs of words, or even three word groups, what about <code class="docutils literal notranslate"><span class="pre">N</span></code>-word-groups? This is the idea behind n-grams: contiguous sequence of <code class="docutils literal notranslate"><span class="pre">n</span></code> items from a given sample of text or speech. The items can be words, letters, syllables, etc.</p>
<p>For example, this type of tracking might be useful when we want to look for “housing affordability” as a single item instead of “housing” and “affordability” as separate items.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> to construct any range of ngrams.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Allow unigrams to trigrams (1 word to 3 word items)</span>
<span class="n">count_vec_uni_tri</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec_uni_tri</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec_uni_tri</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>am</th>
      <th>am commenting</th>
      <th>am commenting today</th>
      <th>and</th>
      <th>and am</th>
      <th>and am commenting</th>
      <th>bill</th>
      <th>commenting</th>
      <th>commenting today</th>
      <th>commenting today in</th>
      <th>...</th>
      <th>of this</th>
      <th>of this bill</th>
      <th>opposition</th>
      <th>opposition of</th>
      <th>opposition of this</th>
      <th>this</th>
      <th>this bill</th>
      <th>today</th>
      <th>today in</th>
      <th>today in opposition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 39 columns</p>
</div></div></div>
</div>
<p>Note: as you increase your ngram range, you gain specificity at the cost of memory because you simply have to keep track of many more distinct grams.</p>
</section>
<section id="working-with-transcript-data">
<h2>Working With Transcript Data<a class="headerlink" href="#working-with-transcript-data" title="Permalink to this heading">#</a></h2>
<p>To get a better understanding of how to work with count data, let’s use city council meeting transcript data made available by Council Data Project.</p>
<p>To do so, let’s first pull a small sample of meeting data, read the transcripts, and construct ngram counts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cdp_data</span> <span class="kn">import</span> <span class="n">CDPInstances</span><span class="p">,</span> <span class="n">datasets</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get_session_dataset</span><span class="p">(</span>
    <span class="n">CDPInstances</span><span class="o">.</span><span class="n">Seattle</span><span class="p">,</span>
    <span class="n">start_datetime</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_datetime</span><span class="o">=</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span>
    <span class="n">store_transcript</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">store_transcript_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">raise_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "3b57346b95c5486d87bb195c2e65033b"}</script><script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "da1c3460f3024e648bb71eef8e73f476"}</script><script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "456d428b66894071aec2b24d6320cc93"}</script><div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">cdp_data</span> <span class="kn">import</span> <span class="n">CDPInstances</span><span class="p">,</span> <span class="n">datasets</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get_session_dataset</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">CDPInstances</span><span class="o">.</span><span class="n">Seattle</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">start_datetime</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">end_datetime</span><span class="o">=</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="n">store_transcript</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">store_transcript_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="n">raise_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/cdp_data/datasets.py:774,</span> in <span class="ni">get_session_dataset</span><span class="nt">(infrastructure_slug, start_datetime, end_datetime, replace_py_objects, store_full_metadata, store_transcript, transcript_selection, store_transcript_as_csv, store_video, store_audio, cache_dir, raise_on_error, tqdm_kws)</span>
<span class="g g-Whitespace">    </span><span class="mi">771</span> <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Converting and storing transcripts as CSVs&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span> <span class="c1"># Threaded processing of transcript conversion</span>
<span class="ne">--&gt; </span><span class="mi">774</span> <span class="n">converted_transcript_infos</span> <span class="o">=</span> <span class="n">process_map</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>     <span class="n">_convert_transcript_to_csv</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>     <span class="p">[</span>
<span class="g g-Whitespace">    </span><span class="mi">777</span>         <span class="n">_TranscriptConversionParams</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">778</span>             <span class="n">session_id</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">779</span>             <span class="n">session_key</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">780</span>             <span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">781</span>             <span class="n">transcript_path</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">transcript_path</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">782</span>             <span class="n">raise_on_error</span><span class="o">=</span><span class="n">raise_on_error</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">783</span>         <span class="p">)</span>
<span class="nn">    784         for _, row</span> in <span class="ni">sessions.iterrows</span><span class="nt">()</span>
<span class="g g-Whitespace">    </span><span class="mi">785</span>     <span class="p">],</span>
<span class="g g-Whitespace">    </span><span class="mi">786</span>     <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Converting transcripts&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">787</span>     <span class="o">**</span><span class="n">tqdm_kws</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">788</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">790</span> <span class="c1"># Merge fetched data back to session df</span>
<span class="g g-Whitespace">    </span><span class="mi">791</span> <span class="n">sessions</span> <span class="o">=</span> <span class="n">_merge_dataclasses_to_df</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">792</span>     <span class="n">data_objs</span><span class="o">=</span><span class="n">converted_transcript_infos</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">793</span>     <span class="n">df</span><span class="o">=</span><span class="n">sessions</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">794</span>     <span class="n">data_objs_key</span><span class="o">=</span><span class="s2">&quot;session_key&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">795</span>     <span class="n">df_key</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">796</span> <span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;transcript_as_csv_path&quot;</span><span class="p">])</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/contrib/concurrent.py:105,</span> in <span class="ni">process_map</span><span class="nt">(fn, *iterables, **tqdm_kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">103</span>     <span class="n">tqdm_kwargs</span> <span class="o">=</span> <span class="n">tqdm_kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">104</span>     <span class="n">tqdm_kwargs</span><span class="p">[</span><span class="s2">&quot;lock_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mp_lock&quot;</span>
<span class="ne">--&gt; </span><span class="mi">105</span> <span class="k">return</span> <span class="n">_executor_map</span><span class="p">(</span><span class="n">ProcessPoolExecutor</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="o">**</span><span class="n">tqdm_kwargs</span><span class="p">)</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/contrib/concurrent.py:51,</span> in <span class="ni">_executor_map</span><span class="nt">(PoolExecutor, fn, *iterables, **tqdm_kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span> <span class="k">with</span> <span class="n">ensure_lock</span><span class="p">(</span><span class="n">tqdm_class</span><span class="p">,</span> <span class="n">lock_name</span><span class="o">=</span><span class="n">lock_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">lk</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>     <span class="c1"># share lock in case workers are already using `tqdm`</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span>     <span class="k">with</span> <span class="n">PoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">,</span> <span class="n">initializer</span><span class="o">=</span><span class="n">tqdm_class</span><span class="o">.</span><span class="n">set_lock</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>                       <span class="n">initargs</span><span class="o">=</span><span class="p">(</span><span class="n">lk</span><span class="p">,))</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">51</span>         <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">tqdm_class</span><span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="n">chunksize</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/notebook.py:254,</span> in <span class="ni">tqdm_notebook.__iter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">252</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">253</span>     <span class="n">it</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">tqdm_notebook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">254</span>     <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">255</span>         <span class="c1"># return super(tqdm...) will not catch exception</span>
<span class="g g-Whitespace">    </span><span class="mi">256</span>         <span class="k">yield</span> <span class="n">obj</span>
<span class="g g-Whitespace">    </span><span class="mi">257</span> <span class="c1"># NB: except ... [ as ...] breaks IPython async KeyboardInterrupt</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/std.py:1178,</span> in <span class="ni">tqdm.__iter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1175</span> <span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span>
<span class="g g-Whitespace">   </span><span class="mi">1177</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1178</span>     <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1179</span>         <span class="k">yield</span> <span class="n">obj</span>
<span class="g g-Whitespace">   </span><span class="mi">1180</span>         <span class="c1"># Update and possibly print the progressbar.</span>
<span class="g g-Whitespace">   </span><span class="mi">1181</span>         <span class="c1"># Note: does not call self.update(1) for speed optimisation.</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/process.py:570,</span> in <span class="ni">_chain_from_iterable_of_lists</span><span class="nt">(iterable)</span>
<span class="g g-Whitespace">    </span><span class="mi">564</span> <span class="k">def</span> <span class="nf">_chain_from_iterable_of_lists</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">565</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">566</span><span class="sd">     Specialized implementation of itertools.chain.from_iterable.</span>
<span class="g g-Whitespace">    </span><span class="mi">567</span><span class="sd">     Each item in *iterable* should be a list.  This function is</span>
<span class="g g-Whitespace">    </span><span class="mi">568</span><span class="sd">     careful not to keep references to yielded objects.</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">570</span>     <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">571</span>         <span class="n">element</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">572</span>         <span class="k">while</span> <span class="n">element</span><span class="p">:</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:621,</span> in <span class="ni">Executor.map.&lt;locals&gt;.result_iterator</span><span class="nt">()</span>
<span class="g g-Whitespace">    </span><span class="mi">618</span> <span class="k">while</span> <span class="n">fs</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">619</span>     <span class="c1"># Careful not to keep a reference to the popped future</span>
<span class="g g-Whitespace">    </span><span class="mi">620</span>     <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">621</span>         <span class="k">yield</span> <span class="n">_result_or_cancel</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">622</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">623</span>         <span class="k">yield</span> <span class="n">_result_or_cancel</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">pop</span><span class="p">(),</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">())</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:319,</span> in <span class="ni">_result_or_cancel</span><span class="nt">(***failed resolving arguments***)</span>
<span class="g g-Whitespace">    </span><span class="mi">317</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">319</span>         <span class="k">return</span> <span class="n">fut</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">320</span>     <span class="k">finally</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">321</span>         <span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:453,</span> in <span class="ni">Future.result</span><span class="nt">(self, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span> <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">==</span> <span class="n">FINISHED</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_result</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">453</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">455</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="ow">in</span> <span class="p">[</span><span class="n">CANCELLED</span><span class="p">,</span> <span class="n">CANCELLED_AND_NOTIFIED</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">456</span>     <span class="k">raise</span> <span class="n">CancelledError</span><span class="p">()</span>

<span class="nn">File /usr/lib/python3.10/threading.py:320,</span> in <span class="ni">Condition.wait</span><span class="nt">(self, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span> <span class="k">try</span><span class="p">:</span>    <span class="c1"># restore state no matter what (e.g., KeyboardInterrupt)</span>
<span class="g g-Whitespace">    </span><span class="mi">319</span>     <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">320</span>         <span class="n">waiter</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">321</span>         <span class="n">gotit</span> <span class="o">=</span> <span class="kc">True</span>
<span class="g g-Whitespace">    </span><span class="mi">322</span>     <span class="k">else</span><span class="p">:</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
</section>
<section id="stopping-here-for-now-continue-later">
<h2>STOPPING HERE FOR NOW. CONTINUE LATER<a class="headerlink" href="#stopping-here-for-now-continue-later" title="Permalink to this heading">#</a></h2>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="how-to-count-words">
<h1>How to Count Words<a class="headerlink" href="#how-to-count-words" title="Permalink to this heading">#</a></h1>
<p>Lets use a single transcript for an example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">example_session</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">transcript_as_csv_path</span><span class="p">)</span>
<span class="n">example_session</span>
</pre></div>
</div>
</div>
</div>
<section id="scikit-learn-count-vectorizer">
<h2>Scikit Learn Count Vectorizer<a class="headerlink" href="#scikit-learn-count-vectorizer" title="Permalink to this heading">#</a></h2>
<p>If we want to track word counts over time, what we want is a large matrix of events and counts</p>
<p>Sort of like so:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>session_id</p></th>
<th class="head text-left"><p>session_datetime</p></th>
<th class="head text-left"><p>word</p></th>
<th class="head text-left"><p>count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>abcd-1234</p></td>
<td class="text-left"><p>2020-01-01</p></td>
<td class="text-left"><p>hello</p></td>
<td class="text-left"><p>4</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>abcd-1234</p></td>
<td class="text-left"><p>2020-01-01</p></td>
<td class="text-left"><p>world</p></td>
<td class="text-left"><p>2</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
<td class="text-left"><p>…</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>abcd-1234</p></td>
<td class="text-left"><p>2020-01-01</p></td>
<td class="text-left"><p>ramen</p></td>
<td class="text-left"><p>2</p></td>
</tr>
</tbody>
</table>
<p>Scikit Learn (<code class="docutils literal notranslate"><span class="pre">sklearn</span></code>) has a function to make that somewhat simple. We just need to combine all of the text for a single session into a single string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>
<span class="n">all_session_text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">example_session</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">all_session_text</span><span class="p">])</span>
<span class="n">vectorizer</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">()[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="words">
<h2>Words?<a class="headerlink" href="#words" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> includes all text, so we can see that some of the items counted were numbers and some were words. If we wanted to see their counts we can combine them.</p>
<p>Looks like “able” and “about” were both used 12 and 11 times respectively. Let’s do this counting process for all of the meetings and store the data to a dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
    <span class="n">vectorizer</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">()[:</span><span class="mi">20</span><span class="p">],</span>
    <span class="nb">list</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">toarray</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
<span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&#39; was used </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2"> times in the meeting&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="pass-in-all-documents-at-once">
<h2>Pass In All Documents At Once<a class="headerlink" href="#pass-in-all-documents-at-once" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">session_transcript</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">transcript_as_csv_path</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;session_datetime&quot;</span><span class="p">:</span> <span class="n">row</span><span class="o">.</span><span class="n">session_datetime</span><span class="p">,</span>
            <span class="s2">&quot;session_text&quot;</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">session_transcript</span><span class="o">.</span><span class="n">text</span><span class="p">),</span>
        <span class="p">})</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="n">text_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>
<span class="n">text_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">text_df</span><span class="o">.</span><span class="n">session_text</span><span class="p">)</span>
<span class="n">count_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span> <span class="n">columns</span><span class="o">=</span><span class="n">vectorizer</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">())</span>
<span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">text_df</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span>
<span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">text_df</span><span class="p">[</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">]</span>
<span class="n">count_df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">count_df</span> <span class="o">=</span> <span class="n">count_df</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;session_datetime&quot;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;word&quot;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">)</span>
<span class="n">count_df</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="most-common-words-average-across-all-meetings">
<h2>Most Common Words (Average Across All Meetings)<a class="headerlink" href="#most-common-words-average-across-all-meetings" title="Permalink to this heading">#</a></h2>
<p>Filler words are the most common</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">count_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;word&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>

<span class="c1"># Select the word we are interested in</span>
<span class="n">housing_counts</span> <span class="o">=</span> <span class="n">count_df</span><span class="p">[</span><span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;housing&quot;</span><span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">housing_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="why-is-this-deceptive">
<h2>Why Is This Deceptive?<a class="headerlink" href="#why-is-this-deceptive" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Meetings are different length. One meeting might be longer and therefore have more words overall.</p></li>
<li><p>Discussion doesn’t happen every day. Need to smooth it out somehow.</p></li>
<li><p>“Housing” doesn’t include “house”, “houses”, etc.</p></li>
</ol>
</section>
<section id="possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">
<h2>Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting<a class="headerlink" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">count_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;sum&quot;</span><span class="p">)</span>
<span class="n">count_df</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="replot">
<h2>Replot<a class="headerlink" href="#replot" title="Permalink to this heading">#</a></h2>
<p>Interpret: The y-axis is now “percent usage of this word in each session” i.e. if the value is ~0.01 that means that the word was used 1% of the time (or about 1/100 words used in the meeting was “housing”).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">housing_counts</span> <span class="o">=</span> <span class="n">count_df</span><span class="p">[</span><span class="n">count_df</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;housing&quot;</span><span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">housing_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="possible-solution-rolling-mean-over-one-month">
<h2>Possible Solution: Rolling Mean Over One Month<a class="headerlink" href="#possible-solution-rolling-mean-over-one-month" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rolling_30_days</span> <span class="o">=</span> <span class="n">count_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;word&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="s2">&quot;30D&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">rolling_30_days</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">housing_counts</span> <span class="o">=</span> <span class="n">rolling_30_days</span><span class="p">[</span><span class="n">rolling_30_days</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;housing&quot;</span><span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">housing_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="possible-solution-stem-each-word-prior-to-counting">
<h2>Possible Solution: Stem Each Word Prior to Counting<a class="headerlink" href="#possible-solution-stem-each-word-prior-to-counting" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">housing_counts</span> <span class="o">=</span> <span class="n">rolling_30_days</span><span class="p">[</span><span class="n">rolling_30_days</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;housing&quot;</span><span class="p">,</span> <span class="s2">&quot;house&quot;</span><span class="p">,</span> <span class="s2">&quot;houses&quot;</span><span class="p">])]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;word&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">housing_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/03"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../02/lecture.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Municipal Legislative (Text) Data</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Counting Words</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-count">Let’s Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ngrams">Ngrams</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-transcript-data">Working With Transcript Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stopping-here-for-now-continue-later">STOPPING HERE FOR NOW. CONTINUE LATER</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-count-words">How to Count Words</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scikit-learn-count-vectorizer">Scikit Learn Count Vectorizer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#words">Words?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pass-in-all-documents-at-once">Pass In All Documents At Once</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#most-common-words-average-across-all-meetings">Most Common Words (Average Across All Meetings)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">Plotting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#why-is-this-deceptive">Why Is This Deceptive?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#replot">Replot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-rolling-mean-over-one-month">Possible Solution: Rolling Mean Over One Month</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-stem-each-word-prior-to-counting">Possible Solution: Stem Each Word Prior to Counting</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eva Maxfield Brown and Nic Weber
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>