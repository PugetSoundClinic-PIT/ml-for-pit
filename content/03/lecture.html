

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Lecture 3 – Counting Words &#8212; Machine Learning for Public Interest Technologists</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/03/lecture';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Municipal Legislative (Text) Data" href="../02/lecture.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Machine Learning for Public Interest Technologists - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="Machine Learning for Public Interest Technologists - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../README.html">
                    Machine Learning (and analysis) for Public Interest Technologists
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">About This Course</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01/lecture.html">Lecture 1 – About This Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01/exercise.html">Exercise 1 – Getting Setup with Colab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01/reference.html">Exercise 1 – Reference Code</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Municipal Legislative Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02/lecture.html">Municipal Legislative (Text) Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Counting Words</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lecture 3 – Counting Words</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/PugetSoundClinic-PIT/ml-for-pit/blob/main/content/03/lecture.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/PugetSoundClinic-PIT/ml-for-pit" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/PugetSoundClinic-PIT/ml-for-pit/issues/new?title=Issue%20on%20page%20%2Fcontent/03/lecture.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/03/lecture.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lecture 3 – Counting Words</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-count">Let’s Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ngrams">Ngrams</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-transcript-data">Working With Transcript Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-the-most-common-words-averaged-across-all-meetings">Finding the Most Common Words Averaged Across All Meetings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-words-are-filler-words">Common Words Are Filler Words?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looking-across-time-instead-of-averaging">Looking Across Time Instead of Averaging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-problems">Possible Problems?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-word-stems">Possible Solution: Word Stems</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lecture-3-counting-words">
<h1>Lecture 3 – Counting Words<a class="headerlink" href="#lecture-3-counting-words" title="Permalink to this heading">#</a></h1>
<p>Using the counts of words in a document is a good starting point for descriptive analysis, visualization, and predictive modeling. For example, counts of words is what makes up the data behind <a class="reference external" href="https://trends.google.com/home">Google Search Trends</a> and the <a class="reference external" href="https://books.google.com/ngrams/">Google NGram Viewer</a>.</p>
<p>Between search trends, ngram viewer, and more, the goal is to provide a broad picture as to what things are being discussed, searched, mentioned, etc.</p>
<p>Applying this same idea to municipal legislative data, we might try understand what general topics are commonly discussed in a council via core words for a topic. For example, if the words “housing”, “rent”, and “affordability” are all spoken frequently in a city council meeting, we can broadly interpret that those three terms (and more general ideas about “housing affordability”) were important topics of the meeting.</p>
<p>So for this chapter, let’s try to be able to <strong>find and compare common topics discussed in a city council meeting, via word counts.</strong></p>
<section id="let-s-count">
<h2>Let’s Count<a class="headerlink" href="#let-s-count" title="Permalink to this heading">#</a></h2>
<p>Counting words is such a common task and is so heavily utilized that <code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code> has a whole class for doing just that called <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html">CountVectorizer</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="c1"># Create CountVectorizer object</span>
<span class="n">count_vec</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>

<span class="c1"># An example sentence we will count the words in</span>
<span class="n">example</span> <span class="o">=</span> <span class="s2">&quot;Hello my name is Eva and I am commenting today in opposition of this bill.&quot;</span>

<span class="c1"># Get counts</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">count_vec</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span>
<span class="n">counts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;1x14 sparse matrix of type &#39;&lt;class &#39;numpy.int64&#39;&gt;&#39;
	with 14 stored elements in Compressed Sparse Row format&gt;
</pre></div>
</div>
</div>
</div>
<p>Don’t be afraid of the “sparse matrix” it is just an efficient storage mechanism that scikit-learn uses. We can see the results in a pandas dataframe too by doing the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">counts_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">counts</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>  <span class="c1"># convert from sparse matrix to numpy</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>  <span class="c1"># store words as the column names</span>
<span class="p">)</span>
<span class="n">counts_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>am</th>
      <th>and</th>
      <th>bill</th>
      <th>commenting</th>
      <th>eva</th>
      <th>hello</th>
      <th>in</th>
      <th>is</th>
      <th>my</th>
      <th>name</th>
      <th>of</th>
      <th>opposition</th>
      <th>this</th>
      <th>today</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s take a moment to notice that all of the words have been lowercased.</p>
<p>There are many decisions to make when counting and we recommend you view the documentation for <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html">CountVectorizer</a> to see all of the options but we will highlight a few throughout the rest of this chapter.</p>
<p>First, as already noted, lowercasing is something you can enable or disable. It depends on how specific you want your counts to be, do you want “House” and “house” to be counted separately? The only difference between the two might be that one is the first word in a sentence, but there are many other cases where casing is important to keep.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># And example of turning off lowercasing</span>
<span class="n">count_vec_no_lowercase</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">lowercase</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec_no_lowercase</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec_no_lowercase</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Eva</th>
      <th>Hello</th>
      <th>am</th>
      <th>and</th>
      <th>bill</th>
      <th>commenting</th>
      <th>in</th>
      <th>is</th>
      <th>my</th>
      <th>name</th>
      <th>of</th>
      <th>opposition</th>
      <th>this</th>
      <th>today</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="ngrams">
<h2>Ngrams<a class="headerlink" href="#ngrams" title="Permalink to this heading">#</a></h2>
<p>Second, all of the words are counted individually. I.e. a single word, gets a single count. What if we want to track pairs of words, or even three word groups, what about <code class="docutils literal notranslate"><span class="pre">N</span></code>-word-groups? This is the idea behind n-grams: contiguous sequence of <code class="docutils literal notranslate"><span class="pre">n</span></code> items from a given sample of text or speech. The items can be words, letters, syllables, etc.</p>
<p>For example, this type of tracking might be useful when we want to look for “housing affordability” as a single item instead of “housing” and “affordability” as separate items.</p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> to construct any range of ngrams.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Allow unigrams to trigrams (1 word to 3 word items)</span>
<span class="n">count_vec_uni_tri</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec_uni_tri</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">([</span><span class="n">example</span><span class="p">])</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec_uni_tri</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>am</th>
      <th>am commenting</th>
      <th>am commenting today</th>
      <th>and</th>
      <th>and am</th>
      <th>and am commenting</th>
      <th>bill</th>
      <th>commenting</th>
      <th>commenting today</th>
      <th>commenting today in</th>
      <th>...</th>
      <th>of this</th>
      <th>of this bill</th>
      <th>opposition</th>
      <th>opposition of</th>
      <th>opposition of this</th>
      <th>this</th>
      <th>this bill</th>
      <th>today</th>
      <th>today in</th>
      <th>today in opposition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 39 columns</p>
</div></div></div>
</div>
<p>Note: as you increase your ngram range, you gain specificity at the cost of memory because you simply have to keep track of many more distinct grams.</p>
</section>
<section id="working-with-transcript-data">
<h2>Working With Transcript Data<a class="headerlink" href="#working-with-transcript-data" title="Permalink to this heading">#</a></h2>
<p>To get a better understanding of how to work with count data, let’s use city council meeting transcript data made available by Council Data Project.</p>
<p>To do so, let’s first pull a small sample of meeting data, read the transcripts, and construct ngram counts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cdp_data</span> <span class="kn">import</span> <span class="n">CDPInstances</span><span class="p">,</span> <span class="n">datasets</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get_session_dataset</span><span class="p">(</span>
    <span class="n">CDPInstances</span><span class="o">.</span><span class="n">Seattle</span><span class="p">,</span>
    <span class="n">start_datetime</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_datetime</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span>
    <span class="n">store_transcript</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">store_transcript_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">raise_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "95c7258bdb184a9093256ec1ea3b744b"}</script><script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "047880876e534ff6836d2ee2de92ba36"}</script><script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "b9e8f264c74a444eba2fe9bb5e49cc32"}</script><div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">cdp_data</span> <span class="kn">import</span> <span class="n">CDPInstances</span><span class="p">,</span> <span class="n">datasets</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">df</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">get_session_dataset</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="n">CDPInstances</span><span class="o">.</span><span class="n">Seattle</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="n">start_datetime</span><span class="o">=</span><span class="s2">&quot;2020-01-01&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span>     <span class="n">end_datetime</span><span class="o">=</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="n">store_transcript</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">store_transcript_as_csv</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span>     <span class="n">raise_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/cdp_data/datasets.py:774,</span> in <span class="ni">get_session_dataset</span><span class="nt">(infrastructure_slug, start_datetime, end_datetime, replace_py_objects, store_full_metadata, store_transcript, transcript_selection, store_transcript_as_csv, store_video, store_audio, cache_dir, raise_on_error, tqdm_kws)</span>
<span class="g g-Whitespace">    </span><span class="mi">771</span> <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Converting and storing transcripts as CSVs&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">773</span> <span class="c1"># Threaded processing of transcript conversion</span>
<span class="ne">--&gt; </span><span class="mi">774</span> <span class="n">converted_transcript_infos</span> <span class="o">=</span> <span class="n">process_map</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">775</span>     <span class="n">_convert_transcript_to_csv</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span>     <span class="p">[</span>
<span class="g g-Whitespace">    </span><span class="mi">777</span>         <span class="n">_TranscriptConversionParams</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">778</span>             <span class="n">session_id</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">779</span>             <span class="n">session_key</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">780</span>             <span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">781</span>             <span class="n">transcript_path</span><span class="o">=</span><span class="n">row</span><span class="o">.</span><span class="n">transcript_path</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">782</span>             <span class="n">raise_on_error</span><span class="o">=</span><span class="n">raise_on_error</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">783</span>         <span class="p">)</span>
<span class="nn">    784         for _, row</span> in <span class="ni">sessions.iterrows</span><span class="nt">()</span>
<span class="g g-Whitespace">    </span><span class="mi">785</span>     <span class="p">],</span>
<span class="g g-Whitespace">    </span><span class="mi">786</span>     <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Converting transcripts&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">787</span>     <span class="o">**</span><span class="n">tqdm_kws</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">788</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">790</span> <span class="c1"># Merge fetched data back to session df</span>
<span class="g g-Whitespace">    </span><span class="mi">791</span> <span class="n">sessions</span> <span class="o">=</span> <span class="n">_merge_dataclasses_to_df</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">792</span>     <span class="n">data_objs</span><span class="o">=</span><span class="n">converted_transcript_infos</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">793</span>     <span class="n">df</span><span class="o">=</span><span class="n">sessions</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">794</span>     <span class="n">data_objs_key</span><span class="o">=</span><span class="s2">&quot;session_key&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">795</span>     <span class="n">df_key</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">796</span> <span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;transcript_as_csv_path&quot;</span><span class="p">])</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/contrib/concurrent.py:105,</span> in <span class="ni">process_map</span><span class="nt">(fn, *iterables, **tqdm_kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">103</span>     <span class="n">tqdm_kwargs</span> <span class="o">=</span> <span class="n">tqdm_kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">104</span>     <span class="n">tqdm_kwargs</span><span class="p">[</span><span class="s2">&quot;lock_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mp_lock&quot;</span>
<span class="ne">--&gt; </span><span class="mi">105</span> <span class="k">return</span> <span class="n">_executor_map</span><span class="p">(</span><span class="n">ProcessPoolExecutor</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="o">**</span><span class="n">tqdm_kwargs</span><span class="p">)</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/contrib/concurrent.py:51,</span> in <span class="ni">_executor_map</span><span class="nt">(PoolExecutor, fn, *iterables, **tqdm_kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span> <span class="k">with</span> <span class="n">ensure_lock</span><span class="p">(</span><span class="n">tqdm_class</span><span class="p">,</span> <span class="n">lock_name</span><span class="o">=</span><span class="n">lock_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">lk</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span>     <span class="c1"># share lock in case workers are already using `tqdm`</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span>     <span class="k">with</span> <span class="n">PoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">,</span> <span class="n">initializer</span><span class="o">=</span><span class="n">tqdm_class</span><span class="o">.</span><span class="n">set_lock</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span>                       <span class="n">initargs</span><span class="o">=</span><span class="p">(</span><span class="n">lk</span><span class="p">,))</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">51</span>         <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">tqdm_class</span><span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="n">chunksize</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/notebook.py:249,</span> in <span class="ni">tqdm_notebook.__iter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">247</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">248</span>     <span class="n">it</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">tqdm_notebook</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">249</span>     <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">250</span>         <span class="c1"># return super(tqdm...) will not catch exception</span>
<span class="g g-Whitespace">    </span><span class="mi">251</span>         <span class="k">yield</span> <span class="n">obj</span>
<span class="g g-Whitespace">    </span><span class="mi">252</span> <span class="c1"># NB: except ... [ as ...] breaks IPython async KeyboardInterrupt</span>

<span class="nn">File ~/.local/lib/python3.10/site-packages/tqdm/std.py:1182,</span> in <span class="ni">tqdm.__iter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">   </span><span class="mi">1179</span> <span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span>
<span class="g g-Whitespace">   </span><span class="mi">1181</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1182</span>     <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1183</span>         <span class="k">yield</span> <span class="n">obj</span>
<span class="g g-Whitespace">   </span><span class="mi">1184</span>         <span class="c1"># Update and possibly print the progressbar.</span>
<span class="g g-Whitespace">   </span><span class="mi">1185</span>         <span class="c1"># Note: does not call self.update(1) for speed optimisation.</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/process.py:575,</span> in <span class="ni">_chain_from_iterable_of_lists</span><span class="nt">(iterable)</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span> <span class="k">def</span> <span class="nf">_chain_from_iterable_of_lists</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">570</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">571</span><span class="sd">     Specialized implementation of itertools.chain.from_iterable.</span>
<span class="g g-Whitespace">    </span><span class="mi">572</span><span class="sd">     Each item in *iterable* should be a list.  This function is</span>
<span class="g g-Whitespace">    </span><span class="mi">573</span><span class="sd">     careful not to keep references to yielded objects.</span>
<span class="g g-Whitespace">    </span><span class="mi">574</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">575</span>     <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">576</span>         <span class="n">element</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">577</span>         <span class="k">while</span> <span class="n">element</span><span class="p">:</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:621,</span> in <span class="ni">Executor.map.&lt;locals&gt;.result_iterator</span><span class="nt">()</span>
<span class="g g-Whitespace">    </span><span class="mi">618</span> <span class="k">while</span> <span class="n">fs</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">619</span>     <span class="c1"># Careful not to keep a reference to the popped future</span>
<span class="g g-Whitespace">    </span><span class="mi">620</span>     <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">621</span>         <span class="k">yield</span> <span class="n">_result_or_cancel</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="g g-Whitespace">    </span><span class="mi">622</span>     <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">623</span>         <span class="k">yield</span> <span class="n">_result_or_cancel</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">pop</span><span class="p">(),</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">())</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:319,</span> in <span class="ni">_result_or_cancel</span><span class="nt">(***failed resolving arguments***)</span>
<span class="g g-Whitespace">    </span><span class="mi">317</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">319</span>         <span class="k">return</span> <span class="n">fut</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">320</span>     <span class="k">finally</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">321</span>         <span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

<span class="nn">File /usr/lib/python3.10/concurrent/futures/_base.py:453,</span> in <span class="ni">Future.result</span><span class="nt">(self, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span> <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">==</span> <span class="n">FINISHED</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_result</span><span class="p">()</span>
<span class="ne">--&gt; </span><span class="mi">453</span> <span class="bp">self</span><span class="o">.</span><span class="n">_condition</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">455</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="ow">in</span> <span class="p">[</span><span class="n">CANCELLED</span><span class="p">,</span> <span class="n">CANCELLED_AND_NOTIFIED</span><span class="p">]:</span>
<span class="g g-Whitespace">    </span><span class="mi">456</span>     <span class="k">raise</span> <span class="n">CancelledError</span><span class="p">()</span>

<span class="nn">File /usr/lib/python3.10/threading.py:320,</span> in <span class="ni">Condition.wait</span><span class="nt">(self, timeout)</span>
<span class="g g-Whitespace">    </span><span class="mi">318</span> <span class="k">try</span><span class="p">:</span>    <span class="c1"># restore state no matter what (e.g., KeyboardInterrupt)</span>
<span class="g g-Whitespace">    </span><span class="mi">319</span>     <span class="k">if</span> <span class="n">timeout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">320</span>         <span class="n">waiter</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">321</span>         <span class="n">gotit</span> <span class="o">=</span> <span class="kc">True</span>
<span class="g g-Whitespace">    </span><span class="mi">322</span>     <span class="k">else</span><span class="p">:</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>We will need to read each transcript and combine all of the text from each sentence into one big string for processing with sklearn.</p></li>
<li><p>the main idea is to get a list of string where each item in the string is all of the text of a single meeting.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_process_transcript</span><span class="p">(</span><span class="n">transcript_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a transcript path as a CSV, read the transcript,</span>
<span class="sd">    and return all text as a single string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Read the transcript</span>
    <span class="n">transcript_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">transcript_path</span><span class="p">)</span>

    <span class="c1"># There may be empty sentences (which are read as NaNs)</span>
    <span class="c1"># Filter out anything that isn&#39;t a string</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">transcript_df</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]</span>

    <span class="c1"># Join everything together</span>
    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span>

<span class="c1"># Read all transcripts and create a new column from the result</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">transcript_as_csv_path</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">_process_transcript</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>457</th>
      <td>7dd274c5f221</td>
      <td>I will call the roll. Is the regularly schedul...</td>
    </tr>
    <tr>
      <th>506</th>
      <td>4ce19a0284e0</td>
      <td>Thank you, son, and good afternoon, everybody....</td>
    </tr>
    <tr>
      <th>429</th>
      <td>4cd217847a92</td>
      <td>Thank you. The February 8, 2022 meeting of the...</td>
    </tr>
    <tr>
      <th>533</th>
      <td>0eca93847f00</td>
      <td>Thank you and good morning. This is the meetin...</td>
    </tr>
    <tr>
      <th>430</th>
      <td>22b5037aaeac</td>
      <td>Good morning, everyone. The February 9, 2022 m...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>We can now pretty easily put all of this text data into the <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> object.</p></li>
<li><p>For now, let’s use the default parameters except for one to save on memory</p></li>
<li><p>lets add a <code class="docutils literal notranslate"><span class="pre">min_df</span></code> of 0.01 which means that any words that appear in less than 1% of all examples should be automatically removed</p></li>
<li><p>this naturally filters out words which have rarely come up and saves on memory</p></li>
<li><p>this 0.01 (1%) is arbitrary and we are only going to use it for this example</p></li>
<li><p>this a decision you should consider when doing your own analysis</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a new CountVectorizer specific to this dataset</span>
<span class="n">count_vec</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span>
    <span class="n">min_df</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>  <span class="c1"># remove words that occur in less than 1% of all texts provided</span>
<span class="p">)</span>

<span class="c1"># Process the text and store to new DataFrame</span>
<span class="n">meeting_counts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Let’s also add in a few columns from the original dataframe so we can keep track which sessions are which</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">id</span>
<span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">session_datetime</span>
<span class="n">meeting_counts</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>00</th>
      <th>000</th>
      <th>001</th>
      <th>002</th>
      <th>003</th>
      <th>004</th>
      <th>005</th>
      <th>006</th>
      <th>01</th>
      <th>010</th>
      <th>...</th>
      <th>zones</th>
      <th>zoning</th>
      <th>zoo</th>
      <th>zoom</th>
      <th>zooming</th>
      <th>zulu</th>
      <th>á6</th>
      <th>úi</th>
      <th>session_id</th>
      <th>session_datetime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>515</th>
      <td>0</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>6</td>
      <td>16</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>48f5c259d24e</td>
      <td>2022-06-08 21:00:00+00:00</td>
    </tr>
    <tr>
      <th>520</th>
      <td>1</td>
      <td>4</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>16dfc4e3ffd1</td>
      <td>2022-06-15 21:00:00+00:00</td>
    </tr>
    <tr>
      <th>459</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>043faf456a29</td>
      <td>2022-03-22 16:30:00+00:00</td>
    </tr>
    <tr>
      <th>510</th>
      <td>0</td>
      <td>5</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>756950332217</td>
      <td>2022-05-31 21:00:00+00:00</td>
    </tr>
    <tr>
      <th>204</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>e5c877619172</td>
      <td>2021-02-08 22:00:00+00:00</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 15470 columns</p>
</div></div></div>
</div>
<ul class="simple">
<li><p>Outside of the two metadata columns we just added, each column in this DataFrame is a count for a single word</p></li>
<li><p>We can reshape this dataframe to be a bit more useful for operations later on by make a two columns. One for the “word” and one for the “count</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We use `var_name=&quot;word_&quot;` here because there may be a column for &quot;word&quot; already</span>
<span class="n">meeting_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;session_datetime&quot;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;word_&quot;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">)</span>
<span class="n">meeting_counts</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>session_id</th>
      <th>session_datetime</th>
      <th>word_</th>
      <th>word_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2458069</th>
      <td>d0984a35db68</td>
      <td>2020-01-27 17:30:00+00:00</td>
      <td>dirty</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2787094</th>
      <td>0cf3520c290b</td>
      <td>2021-04-07 16:30:00+00:00</td>
      <td>email</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3971894</th>
      <td>6ddbaa2ac395</td>
      <td>2022-05-10 16:30:00+00:00</td>
      <td>illusions</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5936630</th>
      <td>fd7f4922bcc3</td>
      <td>2021-09-29 16:30:00+00:00</td>
      <td>praise</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6798197</th>
      <td>ce388ee84d34</td>
      <td>2022-07-19 21:00:00+00:00</td>
      <td>roommate</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="finding-the-most-common-words-averaged-across-all-meetings">
<h2>Finding the Most Common Words Averaged Across All Meetings<a class="headerlink" href="#finding-the-most-common-words-averaged-across-all-meetings" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>now that this dataframe is in a shape that is easy to process, we can find the most common words across all meetings</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meeting_counts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;word_&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>word_
the        811.085258
to         580.523979
and        536.774423
that       406.905861
of         375.541741
we         274.442274
in         250.605684
you        228.026643
is         210.078153
for        198.511545
this       162.211368
on         145.808171
it         142.264654
so         137.914742
have       124.415631
are        124.200710
as         110.664298
with       107.017762
council    106.168739
be         105.877442
Name: word_count, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="common-words-are-filler-words">
<h2>Common Words Are Filler Words?<a class="headerlink" href="#common-words-are-filler-words" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>first let remember what this measures: this is the average number of times each word is said in any given meeting</p></li>
<li><p>with that said, we simply see a lot of words that don’t give us a lot of information</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>whenever you are working with text data, you might encounter this problem</p></li>
<li><p>the most common words are “filler” words</p></li>
<li><p>fortunately we can redo this process and add a few extra parameters to the <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> to automatically handle it for us.</p></li>
<li><p>specifically, we can “remove stopwords”. “Stopwords” is the general name that the community has chosen for the “words to remove” and there are common lists of these words which make this process easy.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a new CountVectorizer specific to this dataset</span>
<span class="n">count_vec</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">(</span>
    <span class="n">stop_words</span><span class="o">=</span><span class="s2">&quot;english&quot;</span><span class="p">,</span>  <span class="c1"># remove filler words common in English</span>
    <span class="n">strip_accents</span><span class="o">=</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span>  <span class="c1"># map non-ascii characters to ascii characters (if there is a mapping), otherwise remove</span>
    <span class="n">min_df</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>  <span class="c1"># remove words that occur in less than 1% of all texts provided</span>
<span class="p">)</span>

<span class="c1"># Process the text and store to new DataFrame</span>
<span class="n">meeting_counts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># Add session metadata</span>
<span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">id</span>
<span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">session_datetime</span>

<span class="c1"># Melt</span>
<span class="n">meeting_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;session_datetime&quot;</span><span class="p">],</span> <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;word_&quot;</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">)</span>

<span class="c1"># Get top 20 most common</span>
<span class="n">meeting_counts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;word_&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>word_
council      106.166963
thank         92.566607
just          65.124334
city          57.463588
seattle       48.783304
know          48.190053
member        39.394316
think         38.715808
work          38.623446
really        38.131439
community     38.001776
want          37.689165
public        37.618117
people        35.568384
going         34.937833
like          32.511545
time          31.285968
committee     26.991119
make          26.815275
budget        26.504440
Name: word_count, dtype: float64
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>we still some “filler” words, and some that may be specific to legislative data.</p></li>
<li><p>for example, some might argue that “council” isn’t a very useful word when working specifically with council meeting data</p></li>
<li><p>that said, we do see words that make sense for a local council to be discussing such as “community”, “public”, and “budget”</p></li>
</ul>
</section>
<section id="looking-across-time-instead-of-averaging">
<h2>Looking Across Time Instead of Averaging<a class="headerlink" href="#looking-across-time-instead-of-averaging" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>lets try to plot these counts to see potential trends in usage for certain words</p></li>
<li><p>considering “budget” was a highly used word when averaged across all meetings, lets see if there is variation in its usage over time</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;darkgrid&quot;</span><span class="p">)</span>

<span class="c1"># Select the word we are interested in</span>
<span class="n">budget_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="p">[</span><span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;budget&quot;</span><span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">budget_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6c42e0b89232099a2d2edf2a2f0506796e6be880e26d78a6266eae742a867970.png" src="../../_images/6c42e0b89232099a2d2edf2a2f0506796e6be880e26d78a6266eae742a867970.png" />
</div>
</div>
<ul class="simple">
<li><p>again, let’s take a step back and talk about what this plot shows</p></li>
<li><p>on the x axis we have the session datetime – the date when the session took place</p></li>
<li><p>on the y axis we have the word count – in this case the number of times the word “budget” was used in the meeting at the specified date and time</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>one thing we can observe is that there is a lot of variation in the number of times the word “budget” is used throughout the year, with “budget” being used more often towards the end of each year</p></li>
<li><p>this is pretty common. most cities have a “budget season” and in seattle’s case, “budget season” is in the fall of each year</p></li>
</ul>
</section>
<section id="possible-problems">
<h2>Possible Problems?<a class="headerlink" href="#possible-problems" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>while the above plot and counts provide some insight and can demonstrate the cyclic nature of council discussion at a basic level there may be some problems with this basic analysis</p></li>
<li><p>first, meetings have different durations! if a meeting takes more time, more things were discussed in it and therefore more words were used inflating the word counts for that meeting</p></li>
<li><p>second, we are looking at a single word “budget” but should be including it’s other variants like “budgeting” and “budgets”</p></li>
</ul>
</section>
<section id="possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">
<h2>Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting<a class="headerlink" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>a potential solution for our first problem involving different duration meetings is to convert our plotted value from a simple count to a percent of the total words used in the meeting</p></li>
<li><p>the idea here is that by converting to a percentage we are normalizing the y axis so that all meetings have a value between 0 and 100</p></li>
<li><p>if the y value for a scatter point is 5 that means that 5% of words used in the meeting were the word in question</p></li>
<li><p>in other terms, 5% of words used in the meeting can roughly mean “5 out of every 100 words related to the word in question”</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># take the current word count</span>
    <span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span>
    <span class="c1"># and divide by the total count of words in it&#39;s matching session</span>
    <span class="o">/</span> <span class="n">meeting_counts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;sum&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">meeting_counts</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>session_id</th>
      <th>session_datetime</th>
      <th>word_</th>
      <th>word_count</th>
      <th>percent_use_in_meeting</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2280353</th>
      <td>b87423b9da9a</td>
      <td>2021-02-08 17:30:00+00:00</td>
      <td>denser</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>3249398</th>
      <td>ad93acca5e2b</td>
      <td>2021-07-28 16:30:00+00:00</td>
      <td>floats</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1196289</th>
      <td>a8d6ae13d0fe</td>
      <td>2022-04-19 21:00:00+00:00</td>
      <td>breach</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>3471611</th>
      <td>2a8d031f2ad6</td>
      <td>2020-10-29 16:30:00+00:00</td>
      <td>geography</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1578886</th>
      <td>e7f8cb5d5599</td>
      <td>2021-03-22 21:00:00+00:00</td>
      <td>cleaner</td>
      <td>3</td>
      <td>0.000725</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">budget_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="p">[</span><span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;budget&quot;</span><span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">budget_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/48d988e348336a09079433d3ad2e1002f7c0267001da46b6f990e5878885dd16.png" src="../../_images/48d988e348336a09079433d3ad2e1002f7c0267001da46b6f990e5878885dd16.png" />
</div>
</div>
<ul class="simple">
<li><p>this looks roughly the same as the first plot but we can at least compare across meetings now</p></li>
<li><p>remember that the y-axis now represents a “percent usage of the selected word in this meeting”</p></li>
<li><p>now that the word use is on a shared axis, it also makes it easy to compare across words</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>for fun, lets compare another word with “budget”</p></li>
<li><p>budgeting is one process handled by council but city councils also commonly pass “resolutions”</p></li>
<li><p>resolutions in Seattle are defined as: Legislation that is administrative or temporary, or which expresses policy. Resolutions are not binding law.</p>
<ul>
<li><p><a class="reference external" href="https://www.seattle.gov/cityclerk/agendas-and-legislative-resources/legislative-process/legislative-glossary#">https://www.seattle.gov/cityclerk/agendas-and-legislative-resources/legislative-process/legislative-glossary#</a></p></li>
</ul>
</li>
<li><p>for example, resolutions may be used to name a street after someone, or take a stance on an issue at the federal level that they can’t particularly legislate</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the words we are interested in</span>
<span class="n">target_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="p">[</span><span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s2">&quot;budget&quot;</span><span class="p">,</span> <span class="s2">&quot;resolution&quot;</span><span class="p">])]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;word_&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">target_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/bfdda5d933ba3b9f318f4489b48b9680fed9b6141c669c902de1d2e037a6232c.png" src="../../_images/bfdda5d933ba3b9f318f4489b48b9680fed9b6141c669c902de1d2e037a6232c.png" />
</div>
</div>
<ul class="simple">
<li><p>in comparison to discussions on “budget” it seems like discussions on “resolutions” are less frequent and tend towards the earlier part of the year</p></li>
</ul>
</section>
<section id="possible-solution-word-stems">
<h2>Possible Solution: Word Stems<a class="headerlink" href="#possible-solution-word-stems" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>moving on to the second problem we mentioned, should “we include all the variants of a word in it’s count”</p></li>
<li><p>for example should “budget” have a different count from “budgeting” and “budgets”</p></li>
<li><p>in certain cases you want to keep these words separate but in many cases you may want to combine them</p></li>
<li><p>this is done via a process called “stemming” – finding the “stem” of a word</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>just like “stop word” filtering is so common that there are tools for it, so is “stemming”</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">SnowballStemmer</span>

<span class="n">stemmer</span> <span class="o">=</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="s2">&quot;english&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="s2">&quot;budgeting&quot;</span><span class="p">,</span>
    <span class="s2">&quot;budget&quot;</span><span class="p">,</span>
    <span class="s2">&quot;budgets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;house&quot;</span><span class="p">,</span>
    <span class="s2">&quot;housing&quot;</span><span class="p">,</span>
    <span class="s2">&quot;houses&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bike&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bikes&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bicycle&quot;</span><span class="p">,</span>
<span class="p">]:</span>
    <span class="n">stemmed</span> <span class="o">=</span> <span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting word: &#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&#39;, stemmed form: &#39;</span><span class="si">{</span><span class="n">stemmed</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Starting word: &#39;budgeting&#39;, stemmed form: &#39;budget&#39;
Starting word: &#39;budget&#39;, stemmed form: &#39;budget&#39;
Starting word: &#39;budgets&#39;, stemmed form: &#39;budget&#39;
Starting word: &#39;house&#39;, stemmed form: &#39;hous&#39;
Starting word: &#39;housing&#39;, stemmed form: &#39;hous&#39;
Starting word: &#39;houses&#39;, stemmed form: &#39;hous&#39;
Starting word: &#39;bike&#39;, stemmed form: &#39;bike&#39;
Starting word: &#39;bikes&#39;, stemmed form: &#39;bike&#39;
Starting word: &#39;bicycle&#39;, stemmed form: &#39;bicycl&#39;
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>while there are some problems, stemming works really well to get a word down to its “stem”</p></li>
<li><p>“budgeting”, “budget”, and “budgets” are all stemmed to “budget”</p></li>
<li><p>“house”, “housing”, and “houses” are all stemmed to “hous”</p></li>
<li><p>“bike” and “bikes” both stem to “bike” but “bicycle” doesn’t – so while this isn’t perfect for combining all words to their shared conceptual stem, it does combines a lot of words well</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>lets add this into the <code class="docutils literal notranslate"><span class="pre">CountVectorizer</span></code> so this stemming process is done for us during counting</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create custom CountVectorizer with stemming</span>
<span class="k">class</span> <span class="nc">StemmedCountVectorizer</span><span class="p">(</span><span class="n">CountVectorizer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build_analyzer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Get original CountVec analyzer</span>
        <span class="n">analyzer</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">StemmedCountVectorizer</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">build_analyzer</span><span class="p">()</span>

        <span class="c1"># Create stemmer object</span>
        <span class="n">stemmer</span> <span class="o">=</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="s2">&quot;english&quot;</span><span class="p">)</span>

        <span class="c1"># Stem words prior to counting</span>
        <span class="k">return</span> <span class="k">lambda</span> <span class="n">doc</span><span class="p">:</span> <span class="p">([</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">analyzer</span><span class="p">(</span><span class="n">doc</span><span class="p">)])</span>

<span class="c1"># Initialize this custom count vectorizer</span>
<span class="n">count_vec_with_stemming</span> <span class="o">=</span> <span class="n">StemmedCountVectorizer</span><span class="p">(</span>
    <span class="n">stop_words</span><span class="o">=</span><span class="s2">&quot;english&quot;</span><span class="p">,</span>
    <span class="n">strip_accents</span><span class="o">=</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span>
    <span class="n">min_df</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Process the text and store to new DataFrame</span>
<span class="n">stemmed_meeting_counts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">count_vec_with_stemming</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span>
    <span class="n">columns</span><span class="o">=</span><span class="n">count_vec_with_stemming</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(),</span>
<span class="p">)</span>

<span class="c1"># Add session metadata</span>
<span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">id</span>
<span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">session_datetime</span>

<span class="c1"># Melt</span>
<span class="n">stemmed_meeting_counts</span> <span class="o">=</span> <span class="n">stemmed_meeting_counts</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span>
    <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;session_datetime&quot;</span><span class="p">],</span>
    <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;word_&quot;</span><span class="p">,</span>
    <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;word_count&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Calculate percent use in meeting</span>
<span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># take the current word count</span>
    <span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span>
    <span class="c1"># and divide by the total count of words in it&#39;s matching session</span>
    <span class="o">/</span> <span class="n">stemmed_meeting_counts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">)[</span><span class="s2">&quot;word_count&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s2">&quot;sum&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">stemmed_meeting_counts</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>session_id</th>
      <th>session_datetime</th>
      <th>word_</th>
      <th>word_count</th>
      <th>percent_use_in_meeting</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>589147</th>
      <td>da5102808a71</td>
      <td>2021-04-19 16:30:00+00:00</td>
      <td>assur</td>
      <td>2</td>
      <td>0.000234</td>
    </tr>
    <tr>
      <th>4668362</th>
      <td>30c932c16ab6</td>
      <td>2022-07-12 16:30:00+00:00</td>
      <td>surpass</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4824791</th>
      <td>a4c0aaaf3c42</td>
      <td>2022-03-02 22:00:00+00:00</td>
      <td>timer</td>
      <td>1</td>
      <td>0.000115</td>
    </tr>
    <tr>
      <th>5208048</th>
      <td>d594eaa5e872</td>
      <td>2021-06-21 16:30:00+00:00</td>
      <td>weed</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2730693</th>
      <td>7b73afd99aed</td>
      <td>2020-10-19 21:00:00+00:00</td>
      <td>keto</td>
      <td>0</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>before we can plot terms, we need to remember that when selecting the “words” of interest, we need to get their stemmed version first</p></li>
<li><p>for example, if we tried to select data for “house” instead of “hous” (the stemmed form of “house”) we wouldn’t get any data back</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">budget_counts</span> <span class="o">=</span> <span class="n">stemmed_meeting_counts</span><span class="p">[</span>
    <span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="s2">&quot;english&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="s2">&quot;budget&quot;</span><span class="p">)</span>
<span class="p">]</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">budget_counts</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/c97a57ec8455822864f17c6446f951007e9a93da9b851426133fa8aee26d6a24.png" src="../../_images/c97a57ec8455822864f17c6446f951007e9a93da9b851426133fa8aee26d6a24.png" />
</div>
</div>
<ul class="simple">
<li><p>lets step back again</p></li>
<li><p>the y-axis now represents the “percent usage of any word that stems to ‘budget’” in each meeting</p></li>
</ul>
<hr class="docutils" />
<ul class="simple">
<li><p>this plot may not look too different for “budget” but lets compare the unstemmed and stemmed plot for “house”</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the word we are interested in</span>
<span class="n">unstemmed_house_counts</span> <span class="o">=</span> <span class="n">meeting_counts</span><span class="p">[</span>
    <span class="n">meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;house&quot;</span>
<span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">stemmed_house_counts</span> <span class="o">=</span> <span class="n">stemmed_meeting_counts</span><span class="p">[</span>
    <span class="n">stemmed_meeting_counts</span><span class="p">[</span><span class="s2">&quot;word_&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="s2">&quot;english&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="s2">&quot;house&quot;</span><span class="p">)</span>
<span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># Add a variable to track if the word was stemmed or not</span>
<span class="n">unstemmed_house_counts</span><span class="p">[</span><span class="s2">&quot;stemmed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;unstemmed&quot;</span>
<span class="n">stemmed_house_counts</span><span class="p">[</span><span class="s2">&quot;stemmed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;stemmed&quot;</span>

<span class="c1"># Combine the data into a single frame</span>
<span class="n">stemmed_and_unstemmed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">unstemmed_house_counts</span><span class="p">,</span> <span class="n">stemmed_house_counts</span><span class="p">])</span>

<span class="c1"># Plot the responses for different events and regions</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;session_datetime&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;percent_use_in_meeting&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;stemmed&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>
    <span class="n">data</span><span class="o">=</span><span class="n">stemmed_and_unstemmed</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/8dc0d76aa4d2cf819bf77a6111b1d449869f2c30052588c7d2ff98ee8ba7a5c1.png" src="../../_images/8dc0d76aa4d2cf819bf77a6111b1d449869f2c30052588c7d2ff98ee8ba7a5c1.png" />
</div>
</div>
<ul class="simple">
<li><p>the difference is stark, with stemming, we can see the larger view of discussion involving any of the variants of “house”</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/03"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../02/lecture.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Municipal Legislative (Text) Data</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-s-count">Let’s Count</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ngrams">Ngrams</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-transcript-data">Working With Transcript Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-the-most-common-words-averaged-across-all-meetings">Finding the Most Common Words Averaged Across All Meetings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#common-words-are-filler-words">Common Words Are Filler Words?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looking-across-time-instead-of-averaging">Looking Across Time Instead of Averaging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-problems">Possible Problems?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-make-each-word-count-a-percentage-of-total-words-for-the-meeting">Possible Solution: Make Each Word Count a “Percentage” of Total Words for The Meeting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-solution-word-stems">Possible Solution: Word Stems</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eva Maxfield Brown and Nic Weber
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>